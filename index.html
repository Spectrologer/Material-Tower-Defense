<!DOCTYPE html>
<html lang="en">

<head>
    <!-- The usual head stuff -->
    <meta charset="UTF-8">
    <!-- Make it look good on phones -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Iconic Tower Defense</title>

    <!-- The little icon in the browser tab -->
    <link rel="icon" href="images/icons/support.png">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!-- TailwindCSS for styling without writing a ton of CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Gotta have our custom fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- The main font for the game UI -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <!-- All the cool icons we use for towers and buttons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- And Font Awesome for the CAT tower icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        xintegrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Main stylesheet -->
    <link rel="stylesheet" href="css/utilities.css">
    <link rel="stylesheet" href="css/styles.css">
    <!-- Responsive design utilities -->
    <link rel="stylesheet" href="css/responsive.css">

</head>

<body class="flex items-center justify-center">

    <!-- The main container for the whole game UI -->
    <div class="flex flex-col h-full w-full items-center p-2 sm:p-4 gap-2">

        <!-- The top bar with stats and the options button -->
        <div class="game-stats-panel py-1 px-2 flex-shrink-0 w-full flex flex-col gap-y-1">
            <h1 id="game-title" class="text-3xl sm:text-4xl font-extrabold text-fuchsia-400 text-center cursor-pointer"
                style="text-shadow: 0 0 12px rgba(217, 70, 239, 0.5), 0 2px 4px rgba(0,0,0,0.7);">ICONIC DEFENSE</h1>
            <div class="grid grid-cols-[auto_1fr_auto] items-center">
                <div class="justify-self-start">
                    <button id="options-btn" class="pixel-button !p-0 w-10 h-10 flex items-center justify-center">
                        <span class="material-symbols-outlined !text-2xl">settings</span>
                    </button>
                </div>
                <div class="grid grid-cols-3 gap-x-2 md:gap-x-4 place-items-center text-sm md:text-base">
                    <p class="flex items-center gap-1.5"><span
                            class="material-symbols-outlined text-red-500 text-xl md:text-2xl"
                            style="font-variation-settings: 'FILL' 1;">favorite</span> <span id="lives"
                            class="text-red-500">20</span></p>
                    <p class="flex items-center gap-1.5"><span
                            class="material-symbols-outlined text-yellow-400 text-xl md:text-2xl"
                            style="font-variation-settings: 'FILL' 1;">paid</span> <span id="gold"
                            class="text-yellow-400">100</span></p>
                    <p class="flex items-center gap-1 text-cyan-400">WAVE: <span id="wave"
                            class="text-cyan-400">0</span></p>
                </div>
                <div class="flex justify-self-end">
                    <!-- Sound and music toggles -->
                    <button id="music-toggle-btn" class="text-xs px-2 py-1 toggle-btn">
                        <span id="music-icon" class="material-icons">music_off</span>
                    </button>
                    <button id="sound-toggle-btn" class="text-xs px-2 py-1 toggle-btn">
                        <span id="sound-icon" class="material-icons">volume_up</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Options Menu -->
        <div id="options-menu-overlay" class="hidden fixed inset-0 z-25 bg-black/50"></div>
        <!-- A dark overlay for when the menu is open -->
        <div id="options-menu" class="options-menu game-ui-panel hidden">
            <h3 class="text-lg text-fuchsia-400 mb-2">OPTIONS</h3>
            <button id="library-btn"
                class="pixel-button text-sm py-2 text-center grid grid-cols-[24px_1fr] items-center gap-2 mt-2 shadow-[0_4px_0_#4b5563] border-gray-400">
                <span class="material-symbols-outlined !text-lg justify-self-center"
                    style="color: #81d4fa; font-variation-settings: 'FILL' 1;">
                    menu_book
                </span>
                <span class="text-left">LIBRARY</span>
            </button>
            <button id="trophies-btn"
                class="pixel-button text-sm py-2 text-center grid grid-cols-[24px_1fr] items-center gap-2 shadow-[0_4px_0_#4b5563] border-gray-400">
                <span class="material-symbols-outlined !text-lg justify-self-center"
                    style="color: #ffd700; font-variation-settings: 'FILL' 1;">
                    emoji_events
                </span>
                <span class="text-left">TROPHIES</span>
            </button>
            <button id="log-btn"
                class="pixel-button text-sm py-2 text-center grid grid-cols-[24px_1fr] items-center gap-2 shadow-[0_4px_0_#4b5563] border-gray-400">
                <span class="material-symbols-outlined !text-lg justify-self-center"
                    style="color: #a5d6a7; font-variation-settings: 'FILL' 1;">history_edu</span>
                <span class="text-left">MESSAGE LOG</span>
            </button>
            <button id="toggle-merge-confirm-btn" class="pixel-button text-sm py-2 text-center mt-2">CONFIRM MERGES:
                ON</button>
            <button id="reset-game-btn"
                class="pixel-button bg-red-700 text-white border-red-500 shadow-[0_4px_0_#b91c1c] text-sm py-2 text-center mt-2">RESET
                GAME</button>
            <div class="flex gap-2 mt-auto pt-2">
                <div class="relative w-1/2">
                    <button id="changelog-btn"
                        class="pixel-button text-sm py-2 text-center w-full flex items-center justify-center">
                        <span class="material-symbols-outlined align-middle !text-lg"
                            style="color: #b39ddb;">history</span>
                    </button>
                    <span id="changelog-indicator"
                        class="hidden absolute top-0 right-0 -mt-1 -mr-1 px-2 py-1 bg-red-600 text-white text-[8px] font-bold rounded-full">NEW</span>
                </div>
                <a href="https://github.com/Spectrologer" target="_blank"
                    class="pixel-button !p-0 w-1/2 flex items-center justify-center bg-gray-800 border-gray-600 shadow-[0_4px_0_#4b5563]">
                    <i class="fa-brands fa-github !text-2xl"></i>
                </a>
            </div>
        </div>


        <!-- This container holds the actual game canvas AND the new cloud inventory -->
        <div class="flex-grow relative w-full max-w-[440px] min-h-0 flex gap-2">
            <div id="canvas-container" class="flex-grow relative h-full min-h-0">
                <!-- The canvas is now draggable to enable dragging towers from the game grid -->
                <canvas id="gameCanvas" draggable="true"></canvas>
            </div>
            <!-- Cloud Inventory Panel, this is a drop target for towers from the canvas -->
            <div id="cloud-inventory-panel"
                class="hidden game-ui-panel w-[72px] flex-shrink-0 flex flex-col items-center p-1 gap-2 overflow-y-auto">
                <h3 class="text-xs text-fuchsia-400 -mb-1">CLOUD</h3>
                <div id="cloud-inventory-slots" class="flex flex-col gap-2 w-full items-center">
                    <!-- Inventoried towers will be added here -->
                </div>
            </div>
        </div>

        <!-- The main control panel at the bottom -->
        <div id="bottom-panel-container"
            class="game-ui-panel p-2 sm:p-4 w-full max-w-[440px] flex-shrink-0 flex flex-col gap-4 relative cursor-pointer">

            <div id="next-wave-preview"
                class="hidden absolute bottom-full left-2 flex items-center gap-2 text-white text-sm mb-2">
                <span class="font-bold">UPCOMING:</span>
            </div>
            <button id="delete-btn"
                class="pixel-button !p-0 w-12 h-12 hidden absolute bottom-full mb-2 right-2 bg-red-700 border-red-500 shadow-[0_4px_0_#b91c1c] flex items-center justify-center z-[-1]">
                <span class="material-symbols-outlined !text-2xl">ink_eraser</span>
            </button>
            <div id="onboarding-merge-tip"
                class="hidden absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-[90%] bg-sky-600 border-2 border-sky-400 p-2 text-center text-xs shadow-lg rounded-md z-10">
                <p class="text-white pr-4">Drag towers onto each other to merge and upgrade them!</p>
                <button id="onboarding-dismiss-btn" class="absolute top-0 right-0 p-1 text-white hover:text-sky-200">
                    <span class="material-symbols-outlined !text-base">close</span>
                </button>
            </div>

            <div id="tower-buttons-group" class="relative">
                <h2 id="towers-title" class="text-lg sm:text-xl text-fuchsia-400 text-center">TOWERS</h2>
                <!-- Buttons to buy the basic towers -->
                <div id="tower-buttons" class="grid grid-cols-3 gap-4 mt-2">
                    <button id="buy-pin"
                        class="pixel-button tower-button text-sm sm:text-lg flex items-center justify-center text-center h-12 sm:h-auto px-2">PIN
                        (25G)</button>
                    <button id="buy-castle"
                        class="pixel-button tower-button text-sm sm:text-lg flex items-center justify-center text-center h-12 sm:h-auto px-2">CASTLE
                        (75G)</button>
                    <button id="buy-support"
                        class="pixel-button tower-button text-sm sm:text-lg flex items-center justify-center text-center h-12 sm:h-auto px-2">
                        SUPPORT (50G)
                    </button>
                </div>
            </div>

            <!-- This panel shows up when you select a tower -->
            <div id="sell-panel" class="hidden flex flex-col gap-2">
                <div class="grid grid-cols-3 items-center pt-2">
                    <div class="flex justify-start">
                        <button id="set-ground-target-btn"
                            class="pixel-button !p-0 w-12 h-12 flex items-center justify-center hidden">
                            <span class="material-symbols-outlined">gps_fixed</span>
                        </button>
                    </div>
                    <div class="text-center">
                        <h3 class="text-xl sm:text-2xl text-fuchsia-400">SELECTED</h3>
                    </div>
                    <div class="flex justify-end">
                        <div id="tower-kill-count" class="flex items-center gap-1 text-sm text-gray-400 hidden">
                            <span class="material-symbols-outlined !text-lg">skull</span>
                            <span id="kill-count-value">0</span>
                        </div>
                    </div>
                </div>
                <h4 id="selected-tower-info" class="text-center text-yellow-400 text-lg sm:text-xl min-h-[1rem]"></h4>
                <!-- All the stats for the selected tower -->
                <div id="tower-stats-panel"
                    class="flex flex-wrap justify-center gap-x-4 sm:gap-x-5 gap-y-2 text-sm sm:text-lg mb-2">
                    <p id="stat-damage-p" class="flex items-center gap-1"><span
                            class="material-icons text-xl align-bottom" title="Damage">bolt</span> Dmg: <span
                            id="stat-damage">0</span></p>
                    <p id="stat-range-p" class="flex items-center gap-1"><span
                            class="material-icons text-xl align-bottom" title="Range">radar</span> Rng: <span
                            id="stat-range">0</span></p>
                    <p id="stat-speed-p" class="flex items-center gap-1"><span
                            class="material-icons text-xl align-bottom" title="Attack Speed">speed</span> Spd: <span
                            id="stat-speed">0</span>/s</p>
                    <p id="stat-splash-p" class="flex items-center gap-1"><span
                            class="material-icons text-xl align-bottom" title="Splash Radius">bubble_chart</span> Spl:
                        <span id="stat-splash">0</span>
                    </p>
                    <p id="stat-projectiles-p" class="flex items-center gap-1"><span
                            class="material-symbols-outlined text-xl align-bottom"
                            title="Projectiles">multiple_stop</span> Proj: <span id="stat-projectiles">0</span></p>
                    <p id="stat-boost-p" class="flex items-center gap-1"><span
                            class="material-icons text-xl align-bottom" title="Boost">electric_bolt</span> Bst: <span
                            id="stat-boost">0</span>%</p>
                    <p id="stat-slow-p" class="flex items-center gap-1"><span
                            class="material-symbols-outlined text-xl align-bottom" title="Slow">hourglass_empty</span>
                        Slw: <span id="stat-slow">0</span>%</p>
                    <p id="stat-gold-p" class="hidden flex items-center gap-1"><span
                            class="material-icons text-xl align-bottom" title="Gold Bonus">savings</span> Gld: +<span
                            id="stat-gold">0</span>%</p>
                    <p id="stat-burn-p" class="flex items-center gap-1"><span
                            class="material-symbols-outlined text-xl align-bottom"
                            title="Burn Damage">local_fire_department</span> Brn: <span id="stat-burn">0/s</span></p>
                    <p id="stat-frags-p" class="hidden flex items-center gap-1"><span
                            class="material-icons text-xl align-bottom" title="Fragments">call_split</span> Frags:
                        <span id="stat-frags">0</span>
                    </p>
                    <p id="stat-pins-p" class="hidden flex items-center gap-1"><span
                            class="material-icons text-xl align-bottom" title="Radial Pins">push_pin</span> Pins:
                        <span id="stat-pins">0</span>
                    </p>
                    <p id="stat-jumps-p" class="hidden flex items-center gap-1"><span
                            class="material-symbols-outlined text-xl align-bottom"
                            title="Chain Jumps">electric_bolt</span> Jumps: <span id="stat-jumps">0</span>
                    </p>
                    <p id="stat-jump-range-p" class="hidden flex items-center gap-1"><span
                            class="material-symbols-outlined text-xl align-bottom"
                            title="Jump Range">social_distance</span> Jmp Rng: <span id="stat-jump-range">0</span>
                    </p>
                    <p id="stat-stun-p" class="hidden flex items-center gap-1"><span
                            class="material-symbols-outlined text-xl align-bottom" title="Stun Duration">bolt</span>
                        Stun: <span id="stat-stun">0</span>s
                    </p>
                    <p id="stat-armor-pen-p" class="hidden flex items-center gap-1"><span
                            class="material-symbols-outlined text-xl align-bottom"
                            title="Armor Penetration">shield_moon</span>
                        AP: <span id="stat-armor-pen">0</span>
                    </p>
                    <p id="stat-damage-amp-p" class="hidden flex items-center gap-1"><span
                            class="material-symbols-outlined text-xl align-bottom"
                            title="Damage Amplification">trending_up</span>
                        Dmg Amp: <span id="stat-damage-amp">0</span>
                    </p>
                    <p id="stat-special-p" class="flex items-center gap-1 col-span-full justify-center"><span
                            class="material-symbols-outlined text-xl align-bottom"
                            title="Special Ability">star</span><span id="stat-special">None</span></p>
                </div>
                <div class="flex flex-col gap-2 mt-2">
                    <button id="toggle-mode" class="pixel-button hidden">MODE:</button>
                    <button id="toggle-orbit-direction-btn" class="pixel-button hidden">DIR: CW</button>
                    <button id="toggle-targeting" class="pixel-button hidden">TARGET:</button>
                </div>
                <div id="selected-tower-actions" class="grid grid-cols-2 gap-2 mt-2">
                    <!-- Sell the selected tower -->
                    <button id="sell-tower-btn"
                        class="pixel-button bg-red-700 text-yellow-300 border-red-900 shadow-[0_4px_0_#9a3412] py-2 sell-cloud-btn">SELL</button>
                    <!-- Move the selected tower to the cloud -->
                    <button id="move-to-cloud-btn"
                        class="pixel-button bg-cyan-700 text-white border-cyan-500 shadow-[0_4px_0_#0e7490] py-2 hidden items-center justify-center gap-1 sm:flex">
                        <span class="material-symbols-outlined !text-base">cloud_upload</span>
                        <span class="hidden sm:inline ">MOVE</span>
                    </button>
                </div>
            </div>

            <!-- The main game controls: start wave, speed, and cloud -->
            <div id="game-controls" class="flex gap-4">
                <button id="start-wave"
                    class="pixel-button flex-auto text-sm sm:text-lg flex items-center justify-center">START
                    WAVE
                </button>
                <button id="speed-toggle"
                    class="pixel-button flex-auto text-sm sm:text-lg flex items-center justify-center">x1</button>
                <button id="cloud-button" class="pixel-button flex-auto flex items-center justify-center text-sm">
                    <span id="cloud-icon" class="material-symbols-outlined !text-lg">cloud</span>
                    <span id="cloud-text" class="ml-1 text-sm sm:text-lg">(25G)</span>
                </button>
            </div>
        </div>

    </div>

    <!-- The "Game Over" screen, hidden by default -->
    <div id="game-over-modal"
        class="hidden absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center z-20">
        <div class="game-over-modal text-center p-8">
            <h2 id="game-over-title" class="text-4xl mb-4">GAME OVER</h2>
            <p id="game-over-message" class="text-xl mb-6">You survived 0 waves!</p>
            <button id="restart-game" class="pixel-button text-2xl">RESTART</button>
        </div>
    </div>

    <!-- Endless Mode Choice Modal -->
    <div id="endless-choice-modal"
        class="hidden absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center z-20">
        <div class="game-over-modal text-center p-8">
            <h2 class="text-4xl mb-4 text-fuchsia-400">WAVES COMPLETE!</h2>
            <p class="text-xl mb-6">You've beaten all handcrafted waves. What's next?</p>
            <div class="flex gap-4">
                <button id="start-endless-btn"
                    class="pixel-button text-2xl bg-purple-700 border-purple-500 shadow-[0_4px_0_#6b21a8]">START
                    ENDLESS</button>
                <button id="restart-endless-btn"
                    class="pixel-button text-2xl flex items-center justify-center">RESTART</button>
            </div>
        </div>
    </div>

    <!-- Wave 16 Power Choice Modal -->
    <div id="wave-16-power-choice-modal"
        class="hidden absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center z-20">
        <div class="game-over-modal text-center p-8">
            <h2 class="text-4xl mb-4 text-fuchsia-400">POWER UP!</h2>
            <p class="text-xl mb-6">You defeated the boss! Choose your power:</p>
            <div class="flex flex-row gap-4 w-full justify-center">
                <div class="flex flex-col items-center text-center w-28">
                    <button id="delete-power-btn"
                        class="pixel-button text-lg bg-red-700 border-red-500 shadow-[0_4px_0_#b91c1c] flex flex-col items-center justify-center h-24 w-24">
                        <span class="material-symbols-outlined !text-3xl">ink_eraser</span>
                        <span class="text-sm">DELETE</span>
                    </button>
                    <p class="text-xs mt-2 leading-tight">Clear all enemies from the screen once.</p>
                </div>
                <div class="flex flex-col items-center text-center w-28">
                    <button id="cloud-power-btn"
                        class="pixel-button text-lg bg-blue-700 border-blue-500 shadow-[0_4px_0_#1e40af] flex flex-col items-center justify-center h-24 w-24">
                        <span class="material-symbols-outlined !text-3xl">cloud_done</span>
                        <span class="text-sm">CLOUD</span>
                    </button>
                    <p class="text-xs mt-2 leading-tight">Unlock permanent cloud storage & get 125G.</p>
                </div>
                <div class="flex flex-col items-center text-center w-28">
                    <button id="lives-power-btn"
                        class="pixel-button text-lg bg-green-700 border-green-500 shadow-[0_4px_0_#15803d] flex flex-col items-center justify-center h-24 w-24">
                        <span class="material-symbols-outlined !text-3xl">heart_plus</span>
                        <span class="text-sm">+20 LIVES</span>
                    </button>
                    <p class="text-xs mt-2 leading-tight">Instantly gain 20 lives.</p>
                </div>
            </div>
        </div>
    </div>


    <!-- The pop-up to confirm a tower merge -->
    <div id="merge-confirm-modal"
        class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-30">
        <div class="game-ui-panel text-center p-6 w-11/12 max-w-sm">
            <h3 class="text-lg sm:text-xl text-fuchsia-400 mb-4">CONFIRM MERGE</h3>
            <div class="flex items-center justify-center gap-4 text-white text-sm sm:text-base">
                <div id="merge-from-tower-icon-container" class="w-12 h-12 flex items-center justify-center text-3xl">
                </div>
                <span id="merge-from-tower-name" class="mt-1"></span>
            </div>
            <span class="material-symbols-outlined text-2xl text-yellow-400">add</span>
            <div class="flex flex-col items-center">
                <div id="merge-to-tower-icon-container" class="w-12 h-12 flex items-center justify-center text-3xl">
                </div>
                <span id="merge-to-tower-name" class="mt-1"></span>
            </div>
            <span class="material-symbols-outlined text-2xl text-fuchsia-400">arrow_right_alt</span>
            <div class="flex flex-col items-center">
                <div id="merge-result-tower-icon-container" class="w-12 h-12 flex items-center justify-center text-3xl">
                </div>
                <span id="merge-result-tower-name" class="mt-1"></span>
                <span id="merge-result-benefit-text" class="text-xs text-yellow-400 mt-1"></span>
            </div>
            <div id="merge-cost-info" class="text-center text-yellow-400 text-sm my-4"></div>
            <div class="grid grid-cols-2 gap-4 mt-6">
                <button id="confirm-merge-btn"
                    class="pixel-button bg-purple-700 text-white border-purple-500 shadow-[0_4px_0_#6b21a8]">CONFIRM</button>
                <button id="cancel-merge-btn"
                    class="pixel-button bg-red-700 text-white border-red-500 shadow-[0_4px_0_#b91c1c]">CANCEL</button>
            </div>
        </div>
    </div>

    <!-- Library Modal -->
    <div id="library-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-40">
        <div class="game-ui-panel p-4 w-11/12 max-w-lg h-[85%] flex flex-col">
            <h3 class="text-lg sm:text-xl text-fuchsia-400 mb-2 text-center">LIBRARY</h3>
            <!-- Tabs to switch between towers and enemies -->
            <div class="flex border-b-2 border-gray-600 mb-2">
                <button id="library-towers-tab"
                    class="pixel-button flex-1 !rounded-b-none border-b-0 bg-gray-600 text-sm py-2">TOWERS</button>
                <button id="library-enemies-tab"
                    class="pixel-button flex-1 !rounded-b-none border-b-0 text-sm py-2">ENEMIES</button>
            </div>

            <!-- The main view for the library cards -->
            <div class="flex-grow relative bg-black/20 p-2 border border-gray-600 overflow-hidden min-h-0">
                <div id="tower-library-rolodex" class="w-full h-full">
                    <!-- Tower Cards will be generated here -->
                </div>
                <div id="enemy-library-rolodex" class="w-full h-full hidden">
                    <!-- Enemy Cards will be generated here -->
                </div>
            </div>

            <div class="flex justify-between items-center mt-4">
                <button id="library-prev-btn" class="pixel-button text-base p-2">&lt; PREV</button>
                <span id="library-counter" class="text-white text-base">1 / X</span>
                <button id="library-next-btn" class="pixel-button text-base p-2">NEXT &gt;</button>
            </div>
            <button id="library-close-btn"
                class="pixel-button bg-red-700 text-white border-red-500 shadow-[0_4px_0_#b91c1c] mt-4">CLOSE</button>
        </div>
    </div>

    <!-- Trophies Modal -->
    <div id="trophies-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-40">
        <div class="game-ui-panel p-4 w-11/12 max-w-sm h-3/4 flex flex-col">
            <h3 class="text-lg sm:text-xl text-fuchsia-400 mb-4 text-center">TROPHIES</h3>
            <div id="trophies-list" class="flex-grow bg-black/20 p-2 border border-gray-600 overflow-y-auto">
                <!-- Trophies will be listed here -->
            </div>
            <button id="trophies-close-btn"
                class="pixel-button bg-red-700 text-white border-red-500 shadow-[0_4px_0_#b91c1c] mt-4">CLOSE</button>
        </div>
    </div>

    <!-- Changelog Modal -->
    <div id="changelog-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-40">
        <div class="game-ui-panel p-4 w-11/12 max-w-sm h-3/4 flex flex-col">
            <h3 class="text-lg sm:text-xl text-fuchsia-400 mb-4 text-center">CHANGELOG</h3>
            <div id="changelog-list"
                class="flex-grow bg-black/20 p-2 border border-gray-600 overflow-y-auto flex flex-col gap-4">
                <!-- Changelog entries go here -->
            </div>
            <button id="changelog-close-btn"
                class="pixel-button bg-red-700 text-white border-red-500 shadow-[0_4px_0_#b91c1c] mt-4 flex items-center justify-center">CLOSE</button>
        </div>
    </div>

    <!-- Message Log Modal -->
    <div id="log-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-40">
        <div class="game-ui-panel p-4 w-11/12 max-w-sm h-3/4 flex flex-col">
            <h3 class="text-lg sm:text-xl text-fuchsia-400 mb-4 text-center">MESSAGE LOG</h3>
            <div id="log-list"
                class="flex-grow bg-black/20 p-2 border border-gray-600 overflow-y-auto flex flex-col-reverse gap-2">
                <!-- Past announcements will be listed here -->
            </div>
            <button id="log-close-btn"
                class="pixel-button bg-red-700 text-white border-red-500 shadow-[0_4px_0_#b91c1c] mt-4">CLOSE</button>
        </div>
    </div>

    <!-- The main script that runs the game -->
    <script type="module" src="js/main.js"></script>

</body>

</html>